<div class="panel panel-default">
    <div class="panel-heading">
        <strong>Secrets</strong>
    </div>
    {% if secrets %}
        <table class="table table-hover panel-body">
            {% for secret in secrets %}
                <tr>
                    <td><a href="{% url 'secrets:secret' pk=secret.pk %}">{{ secret.role }}</a></td>
                    <td>{{ secret.name }}</td>
                    <td id="secret_{{ secret.pk }}">********</td>
                    <td class="text-right noprint">
                        <button class="btn btn-xs btn-success unlock-secret" secret-id="{{ secret.pk }}">
                            <i class="fa fa-lock"></i> Unlock
                        </button>
                        <button class="btn btn-xs btn-default copy-secret collapse" secret-id="{{ secret.pk }}" data-clipboard-target="#secret_{{ secret.pk }}">
                            <i class="fa fa-copy"></i> Copy
                        </button>
                        <button class="btn btn-xs btn-danger lock-secret collapse" secret-id="{{ secret.pk }}">
                            <i class="fa fa-unlock-alt"></i> Lock
                        </button>
                    </td>
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <div class="panel-body text-muted">
            None found
        </div>
    {% endif %}
    {% if perms.secrets.add_secret %}
        <form id="secret_form">
            {% csrf_token %}
        </form>
        <div class="panel-footer text-right noprint">
            <a href="{% url 'secrets:secret_add' %}?device={{ device.pk }}&return_url={{ device.get_absolute_url }}" class="btn btn-xs btn-primary">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add secret
            </a>
        </div>
    {% endif %}
</div>
